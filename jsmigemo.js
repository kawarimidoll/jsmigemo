!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.jsmigemo=n():e.jsmigemo=n()}(window,function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.binarySearch=function(e,n,t,r){for(var i=n,w=t-1;i<=w;){const n=i+w>>>1,t=e[n];if(t<r)i=n+1;else{if(!(t>r))return n;w=n-1}}return-(i+1)},n.binarySearchChar=function(e,n,t,r){for(var i=n,w=t-1;i<=w;){const n=i+w>>>1,t=e.charCodeAt(n);if(t<r)i=n+1;else{if(!(t>r))return n;w=n-1}}return-(i+1)},n.binarySearchString=function(e,n,t,r){for(var i=n,w=t-1;i<=w;){const n=i+w>>>1,t=e[n];if(t<r)i=n+1;else{if(!(t>r))return n;w=n-1}}return-(i+1)},n.bitCount=function(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)},n.numberOfTrailingZeros=function(e){let n,t;if(0==e)return 64;let r=63;return 0!=(t=e)?(r-=32,n=t):n=e>>>32,0!=(t=n<<16)&&(r-=16,n=t),0!=(t=n<<8)&&(r-=8,n=t),0!=(t=n<<4)&&(r-=4,n=t),0!=(t=n<<2)&&(r-=2,n=t),r-(n<<1>>>31)}},function(e,n,t){"use strict";function r(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),r(t(2)),r(t(5))},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=t(3),i=t(4);n.Migemo=class{constructor(){this.dict=null}queryAWord(e){let n=r.RegexGenerator.getDEFAULT();n.add(e);let t=e.toLowerCase();if(null!=this.dict)for(let e of this.dict.predictiveSearch(t))n.add(e);let w=i.romajiToHiraganaPredictively(t);for(let e of w.predictiveSuffixes){let t=w.estaglishedHiragana+e;if(n.add(t),null!=this.dict)for(let e of this.dict.predictiveSearch(t))n.add(e)}return n.generate()}query(e){if(""==e)return"";let n=this.parseQuery(e),t="";for(let e of n)t+=this.queryAWord(e);return t}setDict(e){this.dict=e}*parseQuery(e){let n,t=/[^A-Z\s]+|[A-Z]{2,}|([A-Z][^A-Z\s]+)|([A-Z]\s*$)/g;for(;null!==(n=t.exec(e));)yield n[0]}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});class r{constructor(e){this.code=e,this.child=null,this.next=null}}n.RegexNode=r;class i{constructor(e,n,t,r,i,w){this.or=e,this.beginGroup=n,this.endGroup=t,this.beginClass=r,this.endClass=i,this.newline=w,this.root=null}static getDEFAULT(){return new i("|","(",")","[","]","")}static _add(e,n,t){if(null==e)return t>=n.length?null:(e=new r(n[t]),t<n.length-1&&(e.child=i._add(null,n,t+1)),e);let w=e;const o=n[t];if(o<e.code){let l=new r(o);l.next=e,e=l,t<n.length&&(e.child=i._add(null,n,t+1)),w=e}else{for(;null!=e.next&&e.next.code<=o;)e=e.next;if(e.code==o){if(null==e.child)return w}else{let n=new r(o);n.next=e.next,e.next=n,e=n}if(n.length==t+1)return e.child=null,w;e.child=i._add(e.child,n,t+1)}return w}add(e){0!=e.length&&(this.root=i._add(this.root,e,0))}_generateStub(e){let n=1,t=0,r="";for(let r=e;null!=r;r=r.next)null!=r.next&&n++,null!=r.child&&t++;let i=n-t;if(n>1&&t>0&&(r+=this.beginGroup),i>0){i>1&&(r+=this.beginClass);for(let n=e;null!=n;n=n.next)null==n.child&&(-1!="\\.[]{}()*+-?^$|".indexOf(n.code)&&(r+="\\"),r+=n.code);i>1&&(r+=this.endClass)}if(t>0){i>0&&(r+=this.or);let n=null;for(n=e;null==n.child;n=n.next);for(;;){for(-1!="\\.[]{}()*+-?^$|".indexOf(n.code)&&(r+="\\"),r+=n.code,null!=this.newline&&(r+=this.newline),r+=this._generateStub(n.child),n=n.next;null!=n&&null==n.child;n=n.next);if(null==n)break;t>1&&(r+=this.or)}}return n>1&&t>0&&(r+=this.endGroup),r}generate(){return null==this.root?"":this._generateStub(this.root)}}n.RegexGenerator=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=t(0);class i{constructor(e,n,t){this.roman=e,this.hiragana=n,this.remain=t,this.index=i.calculateIndex(e)}static _calculateIndex(e,n,t){let r=0;for(let i=0;i<4;i++){let w=i+n;r|=w<e.length&&w<t?e.charCodeAt(w):0,i<3&&(r<<=8)}return r}static calculateIndex(e){return i._calculateIndex(e,0,4)}}const w=[new i("-","ー",0),new i("~","〜",0),new i(".","。",0),new i(",","、",0),new i("z/","・",0),new i("z.","…",0),new i("z,","‥",0),new i("zh","←",0),new i("zj","↓",0),new i("zk","↑",0),new i("zl","→",0),new i("z-","〜",0),new i("z[","『",0),new i("z]","』",0),new i("[","「",0),new i("]","」",0),new i("va","ゔぁ",0),new i("vi","ゔぃ",0),new i("vu","ゔ",0),new i("ve","ゔぇ",0),new i("vo","ゔぉ",0),new i("vya","ゔゃ",0),new i("vyi","ゔぃ",0),new i("vyu","ゔゅ",0),new i("vye","ゔぇ",0),new i("vyo","ゔょ",0),new i("qq","っ",1),new i("vv","っ",1),new i("ll","っ",1),new i("xx","っ",1),new i("kk","っ",1),new i("gg","っ",1),new i("ss","っ",1),new i("zz","っ",1),new i("jj","っ",1),new i("tt","っ",1),new i("dd","っ",1),new i("hh","っ",1),new i("ff","っ",1),new i("bb","っ",1),new i("pp","っ",1),new i("mm","っ",1),new i("yy","っ",1),new i("rr","っ",1),new i("ww","っ",1),new i("www","w",2),new i("cc","っ",1),new i("kya","きゃ",0),new i("kyi","きぃ",0),new i("kyu","きゅ",0),new i("kye","きぇ",0),new i("kyo","きょ",0),new i("gya","ぎゃ",0),new i("gyi","ぎぃ",0),new i("gyu","ぎゅ",0),new i("gye","ぎぇ",0),new i("gyo","ぎょ",0),new i("sya","しゃ",0),new i("syi","しぃ",0),new i("syu","しゅ",0),new i("sye","しぇ",0),new i("syo","しょ",0),new i("sha","しゃ",0),new i("shi","し",0),new i("shu","しゅ",0),new i("she","しぇ",0),new i("sho","しょ",0),new i("zya","じゃ",0),new i("zyi","じぃ",0),new i("zyu","じゅ",0),new i("zye","じぇ",0),new i("zyo","じょ",0),new i("tya","ちゃ",0),new i("tyi","ちぃ",0),new i("tyu","ちゅ",0),new i("tye","ちぇ",0),new i("tyo","ちょ",0),new i("cha","ちゃ",0),new i("chi","ち",0),new i("chu","ちゅ",0),new i("che","ちぇ",0),new i("cho","ちょ",0),new i("cya","ちゃ",0),new i("cyi","ちぃ",0),new i("cyu","ちゅ",0),new i("cye","ちぇ",0),new i("cyo","ちょ",0),new i("dya","ぢゃ",0),new i("dyi","ぢぃ",0),new i("dyu","ぢゅ",0),new i("dye","ぢぇ",0),new i("dyo","ぢょ",0),new i("tsa","つぁ",0),new i("tsi","つぃ",0),new i("tse","つぇ",0),new i("tso","つぉ",0),new i("tha","てゃ",0),new i("thi","てぃ",0),new i("t'i","てぃ",0),new i("thu","てゅ",0),new i("the","てぇ",0),new i("tho","てょ",0),new i("t'yu","てゅ",0),new i("dha","でゃ",0),new i("dhi","でぃ",0),new i("d'i","でぃ",0),new i("dhu","でゅ",0),new i("dhe","でぇ",0),new i("dho","でょ",0),new i("d'yu","でゅ",0),new i("twa","とぁ",0),new i("twi","とぃ",0),new i("twu","とぅ",0),new i("twe","とぇ",0),new i("two","とぉ",0),new i("t'u","とぅ",0),new i("dwa","どぁ",0),new i("dwi","どぃ",0),new i("dwu","どぅ",0),new i("dwe","どぇ",0),new i("dwo","どぉ",0),new i("d'u","どぅ",0),new i("nya","にゃ",0),new i("nyi","にぃ",0),new i("nyu","にゅ",0),new i("nye","にぇ",0),new i("nyo","にょ",0),new i("hya","ひゃ",0),new i("hyi","ひぃ",0),new i("hyu","ひゅ",0),new i("hye","ひぇ",0),new i("hyo","ひょ",0),new i("bya","びゃ",0),new i("byi","びぃ",0),new i("byu","びゅ",0),new i("bye","びぇ",0),new i("byo","びょ",0),new i("pya","ぴゃ",0),new i("pyi","ぴぃ",0),new i("pyu","ぴゅ",0),new i("pye","ぴぇ",0),new i("pyo","ぴょ",0),new i("fa","ふぁ",0),new i("fi","ふぃ",0),new i("fu","ふ",0),new i("fe","ふぇ",0),new i("fo","ふぉ",0),new i("fya","ふゃ",0),new i("fyu","ふゅ",0),new i("fyo","ふょ",0),new i("hwa","ふぁ",0),new i("hwi","ふぃ",0),new i("hwe","ふぇ",0),new i("hwo","ふぉ",0),new i("hwyu","ふゅ",0),new i("mya","みゃ",0),new i("myi","みぃ",0),new i("myu","みゅ",0),new i("mye","みぇ",0),new i("myo","みょ",0),new i("rya","りゃ",0),new i("ryi","りぃ",0),new i("ryu","りゅ",0),new i("rye","りぇ",0),new i("ryo","りょ",0),new i("n'","ん",0),new i("nn","ん",0),new i("n","ん",0),new i("xn","ん",0),new i("a","あ",0),new i("i","い",0),new i("u","う",0),new i("wu","う",0),new i("e","え",0),new i("o","お",0),new i("xa","ぁ",0),new i("xi","ぃ",0),new i("xu","ぅ",0),new i("xe","ぇ",0),new i("xo","ぉ",0),new i("la","ぁ",0),new i("li","ぃ",0),new i("lu","ぅ",0),new i("le","ぇ",0),new i("lo","ぉ",0),new i("lyi","ぃ",0),new i("xyi","ぃ",0),new i("lye","ぇ",0),new i("xye","ぇ",0),new i("ye","いぇ",0),new i("ka","か",0),new i("ki","き",0),new i("ku","く",0),new i("ke","け",0),new i("ko","こ",0),new i("xka","ヵ",0),new i("xke","ヶ",0),new i("lka","ヵ",0),new i("lke","ヶ",0),new i("ga","が",0),new i("gi","ぎ",0),new i("gu","ぐ",0),new i("ge","げ",0),new i("go","ご",0),new i("sa","さ",0),new i("si","し",0),new i("su","す",0),new i("se","せ",0),new i("so","そ",0),new i("ca","か",0),new i("ci","し",0),new i("cu","く",0),new i("ce","せ",0),new i("co","こ",0),new i("qa","くぁ",0),new i("qi","くぃ",0),new i("qu","く",0),new i("qe","くぇ",0),new i("qo","くぉ",0),new i("kwa","くぁ",0),new i("kwi","くぃ",0),new i("kwu","くぅ",0),new i("kwe","くぇ",0),new i("kwo","くぉ",0),new i("gwa","ぐぁ",0),new i("gwi","ぐぃ",0),new i("gwu","ぐぅ",0),new i("gwe","ぐぇ",0),new i("gwo","ぐぉ",0),new i("za","ざ",0),new i("zi","じ",0),new i("zu","ず",0),new i("ze","ぜ",0),new i("zo","ぞ",0),new i("ja","じゃ",0),new i("ji","じ",0),new i("ju","じゅ",0),new i("je","じぇ",0),new i("jo","じょ",0),new i("jya","じゃ",0),new i("jyi","じぃ",0),new i("jyu","じゅ",0),new i("jye","じぇ",0),new i("jyo","じょ",0),new i("ta","た",0),new i("ti","ち",0),new i("tu","つ",0),new i("tsu","つ",0),new i("te","て",0),new i("to","と",0),new i("da","だ",0),new i("di","ぢ",0),new i("du","づ",0),new i("de","で",0),new i("do","ど",0),new i("xtu","っ",0),new i("xtsu","っ",0),new i("ltu","っ",0),new i("ltsu","っ",0),new i("na","な",0),new i("ni","に",0),new i("nu","ぬ",0),new i("ne","ね",0),new i("no","の",0),new i("ha","は",0),new i("hi","ひ",0),new i("hu","ふ",0),new i("fu","ふ",0),new i("he","へ",0),new i("ho","ほ",0),new i("ba","ば",0),new i("bi","び",0),new i("bu","ぶ",0),new i("be","べ",0),new i("bo","ぼ",0),new i("pa","ぱ",0),new i("pi","ぴ",0),new i("pu","ぷ",0),new i("pe","ぺ",0),new i("po","ぽ",0),new i("ma","ま",0),new i("mi","み",0),new i("mu","む",0),new i("me","め",0),new i("mo","も",0),new i("xya","ゃ",0),new i("lya","ゃ",0),new i("ya","や",0),new i("wyi","ゐ",0),new i("xyu","ゅ",0),new i("lyu","ゅ",0),new i("yu","ゆ",0),new i("wye","ゑ",0),new i("xyo","ょ",0),new i("lyo","ょ",0),new i("yo","よ",0),new i("ra","ら",0),new i("ri","り",0),new i("ru","る",0),new i("re","れ",0),new i("ro","ろ",0),new i("xwa","ゎ",0),new i("lwa","ゎ",0),new i("wa","わ",0),new i("wi","うぃ",0),new i("we","うぇ",0),new i("wo","を",0),new i("wha","うぁ",0),new i("whi","うぃ",0),new i("whu","う",0),new i("whe","うぇ",0),new i("who","うぉ",0)].sort((e,n)=>e.index-n.index),o=w.map(e=>e.index);class l{constructor(e,n){this.estaglishedHiragana=e,this.predictiveSuffixes=n}}function s(e,n){let t=-1,l=0,s=o.length;for(let a=0;a<4&&!(e.length<=n+a);a++){let u=i._calculateIndex(e,n,n+a+1);(l=r.binarySearch(o,l,s,u))>=0?t=l:l=-l-1;let h=u+(1<<24-8*a);if((s=r.binarySearch(o,l,s,h))<0&&(s=-s-1),s-l==1)return new Set([w[l]])}let a=new Set;for(let e=l;e<s;e++)a.add(w[e]);return a}n.romajiToHiragana=function(e){if(0==e.length)return"";let n="",t=0,l=1;for(;t<e.length;){let s=-1,a=0,u=o.length;for(;u-a>1&&l<=e.length;){let n=i._calculateIndex(e,t,l);(a=r.binarySearch(o,a,u,n))>=0?s=a:a=-a-1;let w=n+(1<<32-8*(l-t));(u=r.binarySearch(o,a,u,w))<0&&(u=-u-1),l++}if(s>=0){let e=w[s];n+=e.hiragana,l=1+(t=t+e.roman.length-e.remain)}else n+=e.charAt(t),l=++t+1}return n},n.findRomanEntryPredicatively=s,n.romajiToHiraganaPredictively=function(e){if(0==e.length)return new l("",new Set([""]));let n="",t=0,a=1;for(;t<e.length;){let u=-1,h=0,c=o.length;for(;c-h>1&&a<=e.length;){let n=i._calculateIndex(e,t,a);(h=r.binarySearch(o,h,c,n))>=0?u=h:h=-h-1;let w=n+(1<<32-8*(a-t));(c=r.binarySearch(o,h,c,w))<0&&(c=-c-1),a++}if(a>e.length&&c-h!=1){let t=new Set;for(let n=h;n<c;n++){let r=w[n];if(r.remain>0){let n=s(e,a-1-r.remain);for(let e of n)0==e.remain&&t.add(r.hiragana+e.hiragana)}else t.add(r.hiragana)}return new l(n.toString(),t)}if(u>=0){let e=w[u];n+=e.hiragana,a=1+(t=t+e.roman.length-e.remain)}else n+=e.charAt(t),a=++t+1}return new l(n.toString(),new Set([""]))}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=t(6),i=t(7);class w{constructor(e){let n=new DataView(e),t=0;[this.keyTrie,t]=w.readTrie(n,t,!0),[this.valueTrie,t]=w.readTrie(n,t,!1);let r=n.getUint32(t);t+=4;let o=new Uint32Array(2*Math.floor((r+63)/64));for(let e=0;e<o.length>>1;e++)o[2*e+1]=n.getUint32(t),t+=4,o[2*e]=n.getUint32(t),t+=4;this.mappingBitVector=new i.BitVector(o,r);let l=n.getUint32(t);t+=4,this.mapping=new Int32Array(l);for(let e=0;e<l;e++)this.mapping[e]=n.getInt32(t),t+=4;if(t!=e.byteLength)throw new Error}static readTrie(e,n,t){let w=e.getInt32(n);n+=4;let o="";for(let r=0;r<w;r++){let r;t?(r=String.fromCodePoint(this.decode(e.getUint8(n))),n+=1):(r=String.fromCodePoint(e.getUint16(n)),n+=2),o+=r}let l=e.getUint32(n);n+=4;let s=new Uint32Array(2*Math.floor((l+63)/64));for(let t=0;t<s.length>>>1;t++)s[2*t+1]=e.getUint32(n),n+=4,s[2*t]=e.getUint32(n),n+=4;return[new r.LOUDSTrie(new i.BitVector(s,l),o),n]}static decode(e){if(32<=e&&e<=126)return e;if(161<=e&&e<=246)return e+12352-160;throw new RangeError}static encode(e){if(32<=e&&e<=126)return e;if(12353<=e&&e<=12438)return e-12352+160;if(12540==e)return e-12352+160;throw new RangeError}*search(e){let n=this.keyTrie.get(e);if(-1!=n){let e=this.mappingBitVector.select(n,!1),t=this.mappingBitVector.nextClearBit(e+1)-e-1;if(t>0){let n=this.mappingBitVector.rank(e,!1),r=new Array(t);for(let t=0;t<r.length;t++)yield this.valueTrie.getKey(this.mapping[e-n+t]);return r}}}*predictiveSearch(e){let n=this.keyTrie.get(e);if(n>1){new Array;for(let e of this.keyTrie.iterator(n)){let n=this.mappingBitVector.select(e,!1),t=this.mappingBitVector.nextClearBit(n+1)-n-1,r=this.mappingBitVector.rank(n,!1);for(let e=0;e<t;e++)yield this.valueTrie.getKey(this.mapping[n-r+e])}}}}n.CompactDictionary=w},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=t(0);n.LOUDSTrie=class{constructor(e,n){this.bitVector=e,this.edges=n}getKey(e){if(e<=0||this.edges.length<=e)throw new RangeError;let n="";for(;e>1;)n=this.edges[e]+n,e=this.parent(e);return n}parent(e){return this.bitVector.rank(this.bitVector.select(e,!0),!1)}firstChild(e){let n=this.bitVector.select(e,!1)+1;return this.bitVector.get(n)?this.bitVector.rank(n,!0)+1:-1}traverse(e,n){let t=this.firstChild(e);if(-1==t)return-1;let i=this.bitVector.select(t,!0),w=this.bitVector.nextClearBit(i)-i,o=r.binarySearchChar(this.edges,t,t+w,n);return o>=0?o:-1}get(e){let n=1;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);if(-1==(n=this.traverse(n,r)))break}return n>=0?n:-1}*iterator(e){yield e;let n=this.firstChild(e);if(-1==n)return;let t=this.bitVector.select(n,!0);for(;this.bitVector.get(t);)yield*this.iterator(n),n++,t++}size(){return this.edges.length-2}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=t(0);n.BitVector=class{constructor(e,n){if(n+63>>5!=e.length)throw new Error;this.words=e,this.sizeInBits=n,this.lb=new Uint32Array(n+511>>>9),this.sb=new Uint16Array(8*this.lb.length);let t=0,i=0;for(let e=0;e<this.sb.length;e++){let n=e<this.words.length>>>1?r.bitCount(this.words[2*e])+r.bitCount(this.words[2*e+1]):0;this.sb[e]=i,i+=n,7==(7&e)&&(this.lb[e>>3]=t,t+=i,i=0)}}rank(e,n){if(e<0&&this.sizeInBits<=e)throw new RangeError;let t=this.sb[e>>>6]+this.lb[e>>>9];(63&e)>=32&&(t+=r.bitCount(this.words[e>>>5&4294967294]));for(let n=4294967264&e;n<e;n++)this.get(n)&&(t+=1);return n?t:e-t}select(e,n){let t=this.lowerBoundBinarySearchLB(e,n)-1,i=e-(n?this.lb[t]:512*t-this.lb[t]),w=this.lowerBoundBinarySearchSB(i,8*t,8*t+8,n)-1,o=i-(n?this.sb[w]:w%8*64-this.sb[w]),l=this.words[2*w],s=this.words[2*w+1];n||(l=~l,s=~s);let a=r.bitCount(l),u=0;for(o>a&&(l=s,o-=a,u=32);o>0;)o-=1&l,l>>>=1,u++;return 64*w+(u-1)}lowerBoundBinarySearchLB(e,n){let t=this.lb.length,r=-1;for(;t-r>1;){let i=t+r>>>1;(n?this.lb[i]:512*i-this.lb[i])<e?r=i:t=i}return t}lowerBoundBinarySearchSB(e,n,t,r){let i=t,w=n-1;for(;i-w>1;){let n=i+w>>>1;(r?this.sb[n]:64*(7&n)-this.sb[n])<e?w=n:i=n}return i}nextClearBit(e){let n=e>>5,t=~this.words[n]&4294967295<<e;for(;;){if(0!=t)return 32*n+r.numberOfTrailingZeros(t);if(++n==this.words.length)return-1;t=~this.words[n]}}size(){return this.sizeInBits}get(e){if(e<0&&this.sizeInBits<=e)throw new RangeError;return 1==(this.words[e>>>5]>>>(31&e)&1)}}}])});